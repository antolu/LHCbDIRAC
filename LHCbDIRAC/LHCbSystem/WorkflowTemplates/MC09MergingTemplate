<Workflow>
<origin></origin>
<description><![CDATA[MC09 workflow for merging outputs from a previous production.]]></description>
<descr_short></descr_short>
<version>0.0</version>
<type></type>
<name>MC09MergingTemplate</name>
<Parameter name="JobType" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="User specified type"><value><![CDATA[Merge]]></value></Parameter>
<Parameter name="Priority" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="UserPriority"><value><![CDATA[{{Priority#Production priority (default 9)}}]]></value></Parameter>
<Parameter name="JobGroup" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="User specified job group"><value><![CDATA[@{PRODUCTION_ID}]]></value></Parameter>
<Parameter name="JobName" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="Name of Job"><value><![CDATA[Name]]></value></Parameter>
<Parameter name="Site" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="Site Requirement"><value><![CDATA[ANY]]></value></Parameter>
<Parameter name="Origin" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="Origin of client"><value><![CDATA[DIRAC]]></value></Parameter>
<Parameter name="StdOutput" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="Standard output file"><value><![CDATA[std.out]]></value></Parameter>
<Parameter name="StdError" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="Standard error file"><value><![CDATA[std.err]]></value></Parameter>
<Parameter name="InputData" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="Default null input data value"><value><![CDATA[]]></value></Parameter>
<Parameter name="LogLevel" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="User specified logging level"><value><![CDATA[verbose]]></value></Parameter>
<Parameter name="SystemConfig" type="JDLReqt" linked_module="" linked_parameter="" in="True" out="False" description="User specified system configuration for job"><value><![CDATA[slc4_ia32_gcc34]]></value></Parameter>
<Parameter name="MaxCPUTime" type="JDLReqt" linked_module="" linked_parameter="" in="True" out="False" description="CPU time in secs"><value><![CDATA[300000]]></value></Parameter>
<Parameter name="outputDataFileMask" type="string" linked_module="" linked_parameter="" in="True" out="False" description="outputDataFileMask"><value><![CDATA[{{FileType#File type to merge (default DST)}}]]></value></Parameter>
<Parameter name="productionVersion" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ProdAPIVersion"><value><![CDATA[$Id: MC09MergingTemplate,v 1.1 2009/08/03 13:29:27 paterson Exp $]]></value></Parameter>
<Parameter name="PRODUCTION_ID" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ProductionID"><value><![CDATA[00012345]]></value></Parameter>
<Parameter name="JOB_ID" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ProductionJobID"><value><![CDATA[00012345]]></value></Parameter>
<Parameter name="poolXMLCatName" type="string" linked_module="" linked_parameter="" in="True" out="False" description="POOLXMLCatalogName"><value><![CDATA[pool_xml_catalog.xml]]></value></Parameter>
<Parameter name="emailAddress" type="string" linked_module="" linked_parameter="" in="True" out="False" description="CrashEmailAddress"><value><![CDATA[lhcb-datacrash@cern.ch]]></value></Parameter>
<Parameter name="DataType" type="string" linked_module="" linked_parameter="" in="True" out="False" description="Priority"><value><![CDATA[MC]]></value></Parameter>
<Parameter name="outputMode" type="string" linked_module="" linked_parameter="" in="True" out="False" description="SEResolutionPolicy"><value><![CDATA[Local]]></value></Parameter>
<Parameter name="CondDBTag" type="string" linked_module="" linked_parameter="" in="True" out="False" description="CondDBTag"><value><![CDATA[{{p1CDb}}]]></value></Parameter>
<Parameter name="DDDBTag" type="string" linked_module="" linked_parameter="" in="True" out="False" description="DetDescTag"><value><![CDATA[{{p1DDDb}}]]></value></Parameter>
<Parameter name="EventMaxDefault" type="string" linked_module="" linked_parameter="" in="True" out="False" description="DefaultNumberOfEvents"><value><![CDATA[-1]]></value></Parameter>
<Parameter name="configName" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ConfigName"><value><![CDATA[MC]]></value></Parameter>
<Parameter name="configVersion" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ConfigVersion"><value><![CDATA[MC09]]></value></Parameter>
<Parameter name="conditions" type="string" linked_module="" linked_parameter="" in="True" out="False" description="SimOrDataTakingCondsString"><value><![CDATA[{{simDesc}}]]></value></Parameter>
<Parameter name="groupDescription" type="string" linked_module="" linked_parameter="" in="True" out="False" description="GroupDescription"><value><![CDATA[{{pDsc}}]]></value></Parameter>
<Parameter name="simDescription" type="string" linked_module="" linked_parameter="" in="True" out="False" description="SimDescription"><value><![CDATA[{{simDesc}}]]></value></Parameter>
<Parameter name="BKProcessingPass" type="dict" linked_module="" linked_parameter="" in="True" out="False" description="BKProcessingPassInfo"><value><![CDATA[{'Step4': {'ApplicationName': 'LHCb', 'ApplicationVersion': '{{p4Ver}}', 'ExtraPackages': '', 'DDDb': '@{DDDBTag}', 'OptionFiles': '$STDOPTS/PoolCopy.opts', 'CondDb': '@{CondDBTag}'}, 'Step3': {'ApplicationName': '{{p4App}}', 'ApplicationVersion': '{{p4Ver}}', 'ExtraPackages': '{{p4EP}}', 'DDDb': '@{DDDBTag}', 'OptionFiles': '{{p4Opt}}', 'CondDb': '@{CondDBTag}'}, 'Step2': {'ApplicationName': '{{p3App}}', 'ApplicationVersion': '{{p3Ver}}', 'ExtraPackages': '{{p3EP}}', 'DDDb': '@{DDDBTag}', 'OptionFiles': '{{p3Opt}}', 'CondDb': '@{CondDBTag}'}, 'Step1': {'ApplicationName': '{{p2App}}', 'ApplicationVersion': '{{p2Ver}}', 'ExtraPackages': '{{p2EP}}', 'DDDb': '@{DDDBTag}', 'OptionFiles': '{{p2Opt}}', 'CondDb': '@{CondDBTag}'}, 'Step0': {'ApplicationName': '{{p1App}}', 'ApplicationVersion': '{{p1Ver}}', 'ExtraPackages': '{{p1EP}}', 'DDDb': '@{DDDBTag}', 'OptionFiles': '{{p1Opt}}', 'CondDb': '@{CondDBTag}'}}]]></value></Parameter>
<Parameter name="dataType" type="string" linked_module="" linked_parameter="" in="True" out="False" description="DataType"><value><![CDATA[MC]]></value></Parameter>
<Parameter name="InputDataType" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="Default input data type field"><value><![CDATA[]]></value></Parameter>
<Parameter name="SoftwarePackages" type="JDL" linked_module="" linked_parameter="" in="True" out="False" description="LHCbSoftwarePackages"><value><![CDATA[LHCb.{{p4Ver}}]]></value></Parameter>
<ModuleDefinition>
<body><![CDATA[from WorkflowLib.Module.RemoveInputData import RemoveInputData 
]]></body>
<origin></origin>
<description><![CDATA[Removes input data after merged output data uploaded to an SE]]></description>
<descr_short></descr_short>
<required></required>
<version>0.0</version>
<type>RemoveInputData</type>
<Parameter name="Enable" type="bool" linked_module="self" linked_parameter="DataRemovalEnable" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</ModuleDefinition>
<ModuleDefinition>
<body><![CDATA[from WorkflowLib.Module.UploadLogFile import UploadLogFile 
]]></body>
<origin></origin>
<description><![CDATA[Uploads the log files]]></description>
<descr_short></descr_short>
<required></required>
<version>0.0</version>
<type>UploadLogFile</type>
<Parameter name="Enable" type="bool" linked_module="self" linked_parameter="LogEnable" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</ModuleDefinition>
<ModuleDefinition>
<body><![CDATA[from WorkflowLib.Module.SendBookkeeping import SendBookkeeping 
]]></body>
<origin></origin>
<description><![CDATA[Sends the BK reports]]></description>
<descr_short></descr_short>
<required></required>
<version>0.0</version>
<type>SendBookkeeping</type>
<Parameter name="Enable" type="bool" linked_module="self" linked_parameter="BKEnable" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</ModuleDefinition>
<ModuleDefinition>
<body><![CDATA[from WorkflowLib.Module.GaudiApplication import GaudiApplication
]]></body>
<origin></origin>
<description><![CDATA[A generic Gaudi Application module that can execute any provided project name and version]]></description>
<descr_short></descr_short>
<required></required>
<version>0.0</version>
<type>GaudiApplication</type>
</ModuleDefinition>
<ModuleDefinition>
<body><![CDATA[from WorkflowLib.Module.LogChecker import *
]]></body>
<origin></origin>
<description><![CDATA[Check LogFile module]]></description>
<descr_short></descr_short>
<required></required>
<version>0.0</version>
<type>LogChecker</type>
</ModuleDefinition>
<ModuleDefinition>
<body><![CDATA[from WorkflowLib.Module.UploadOutputData import UploadOutputData 
]]></body>
<origin></origin>
<description><![CDATA[Uploads the output data]]></description>
<descr_short></descr_short>
<required></required>
<version>0.0</version>
<type>UploadOutputData</type>
<Parameter name="Enable" type="bool" linked_module="self" linked_parameter="UploadEnable" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</ModuleDefinition>
<ModuleDefinition>
<body><![CDATA[from WorkflowLib.Module.FailoverRequest import * 
]]></body>
<origin></origin>
<description><![CDATA[Sends any failover requests]]></description>
<descr_short></descr_short>
<required></required>
<version>0.0</version>
<type>FailoverRequest</type>
<Parameter name="Enable" type="bool" linked_module="self" linked_parameter="FailoverEnable" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</ModuleDefinition>
<ModuleDefinition>
<body><![CDATA[from WorkflowLib.Module.BookkeepingReport import * 
]]></body>
<origin></origin>
<description><![CDATA[Bookkeeping Report module]]></description>
<descr_short></descr_short>
<required></required>
<version>0.0</version>
<type>BookkeepingReport</type>
<Parameter name="STEP_ID" type="string" linked_module="self" linked_parameter="STEP_ID" in="True" out="False" description="StepID"><value><![CDATA[]]></value></Parameter>
</ModuleDefinition>
<StepDefinition>
<origin></origin>
<version>0.0</version>
<type>Gaudi_App_Step</type>
<description><![CDATA[]]></description>
<descr_short></descr_short>
<Parameter name="inputData" type="string" linked_module="" linked_parameter="" in="True" out="False" description="StepInputData"><value><![CDATA[]]></value></Parameter>
<Parameter name="inputDataType" type="string" linked_module="" linked_parameter="" in="True" out="False" description="InputDataType"><value><![CDATA[]]></value></Parameter>
<Parameter name="eventType" type="string" linked_module="" linked_parameter="" in="True" out="False" description="EventType"><value><![CDATA[]]></value></Parameter>
<Parameter name="outputData" type="string" linked_module="" linked_parameter="" in="True" out="False" description="OutputData"><value><![CDATA[]]></value></Parameter>
<Parameter name="generatorName" type="string" linked_module="" linked_parameter="" in="True" out="False" description="GeneratorName"><value><![CDATA[]]></value></Parameter>
<Parameter name="applicationName" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ApplicationName"><value><![CDATA[]]></value></Parameter>
<Parameter name="applicationVersion" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ApplicationVersion"><value><![CDATA[]]></value></Parameter>
<Parameter name="applicationType" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ApplicationType"><value><![CDATA[]]></value></Parameter>
<Parameter name="applicationLog" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ApplicationLogFile"><value><![CDATA[]]></value></Parameter>
<Parameter name="optionsFile" type="string" linked_module="" linked_parameter="" in="True" out="False" description="OptionsFile"><value><![CDATA[]]></value></Parameter>
<Parameter name="optionsLine" type="string" linked_module="" linked_parameter="" in="True" out="False" description="OptionsLines"><value><![CDATA[]]></value></Parameter>
<Parameter name="optionsLinePrev" type="string" linked_module="" linked_parameter="" in="True" out="False" description="PreviousOptionsLines"><value><![CDATA[]]></value></Parameter>
<Parameter name="numberOfEvents" type="string" linked_module="" linked_parameter="" in="True" out="False" description="NumberOfEvents"><value><![CDATA[]]></value></Parameter>
<Parameter name="numberOfEventsInput" type="string" linked_module="" linked_parameter="" in="True" out="False" description="NumberOfEventsInput"><value><![CDATA[]]></value></Parameter>
<Parameter name="numberOfEventsOutput" type="string" linked_module="" linked_parameter="" in="True" out="False" description="NumberOfEventsOutput"><value><![CDATA[]]></value></Parameter>
<Parameter name="listoutput" type="list" linked_module="" linked_parameter="" in="True" out="False" description="StepOutputList"><value><![CDATA[[]]]></value></Parameter>
<Parameter name="extraPackages" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ExtraPackages"><value><![CDATA[]]></value></Parameter>
<Parameter name="firstEventNumber" type="string" linked_module="" linked_parameter="" in="True" out="False" description="FirstEventNumber"><value><![CDATA[int]]></value></Parameter>
<Parameter name="spilloverData" type="string" linked_module="" linked_parameter="" in="True" out="False" description="spilloverData"><value><![CDATA[]]></value></Parameter>
<Parameter name="pileupData" type="string" linked_module="" linked_parameter="" in="True" out="False" description="pileupData"><value><![CDATA[]]></value></Parameter>
<ModuleInstance>
<type>GaudiApplication</type>
<name>gaudiApp</name>
<descr_short></descr_short>
</ModuleInstance>
<ModuleInstance>
<type>LogChecker</type>
<name>analyseLog</name>
<descr_short></descr_short>
</ModuleInstance>
<ModuleInstance>
<type>BookkeepingReport</type>
<name>genBKReport</name>
<descr_short></descr_short>
<Parameter name="STEP_ID" type="string" linked_module="self" linked_parameter="STEP_ID" in="True" out="False" description="StepID"><value><![CDATA[]]></value></Parameter>
</ModuleInstance>
</StepDefinition>
<StepDefinition>
<origin></origin>
<version>0.0</version>
<type>Job_Finalization</type>
<description><![CDATA[]]></description>
<descr_short></descr_short>
<Parameter name="BKEnable" type="bool" linked_module="" linked_parameter="" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
<Parameter name="UploadEnable" type="bool" linked_module="" linked_parameter="" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
<Parameter name="LogEnable" type="bool" linked_module="" linked_parameter="" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
<Parameter name="DataRemovalEnable" type="bool" linked_module="" linked_parameter="" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
<Parameter name="FailoverEnable" type="bool" linked_module="" linked_parameter="" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
<ModuleInstance>
<type>SendBookkeeping</type>
<name>sendBK</name>
<descr_short></descr_short>
<Parameter name="Enable" type="bool" linked_module="self" linked_parameter="BKEnable" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</ModuleInstance>
<ModuleInstance>
<type>UploadOutputData</type>
<name>dataUpload</name>
<descr_short></descr_short>
<Parameter name="Enable" type="bool" linked_module="self" linked_parameter="UploadEnable" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</ModuleInstance>
<ModuleInstance>
<type>UploadLogFile</type>
<name>logUpload</name>
<descr_short></descr_short>
<Parameter name="Enable" type="bool" linked_module="self" linked_parameter="LogEnable" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</ModuleInstance>
<ModuleInstance>
<type>RemoveInputData</type>
<name>removeInputs</name>
<descr_short></descr_short>
<Parameter name="Enable" type="bool" linked_module="self" linked_parameter="DataRemovalEnable" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</ModuleInstance>
<ModuleInstance>
<type>FailoverRequest</type>
<name>failoverRequest</name>
<descr_short></descr_short>
<Parameter name="Enable" type="bool" linked_module="self" linked_parameter="FailoverEnable" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</ModuleInstance>
</StepDefinition>
<StepInstance>
<type>Gaudi_App_Step</type>
<name>LHCb_5</name>
<descr_short></descr_short>
<Parameter name="inputData" type="string" linked_module="self" linked_parameter="InputData" in="True" out="False" description="StepInputData"><value><![CDATA[]]></value></Parameter>
<Parameter name="inputDataType" type="string" linked_module="" linked_parameter="" in="True" out="False" description="InputDataType"><value><![CDATA[{{FileType#File type to merge (default DST)}}]]></value></Parameter>
<Parameter name="eventType" type="string" linked_module="" linked_parameter="" in="True" out="False" description="EventType"><value><![CDATA[{{eventType}}]]></value></Parameter>
<Parameter name="outputData" type="string" linked_module="" linked_parameter="" in="True" out="False" description="OutputData"><value><![CDATA[@{STEP_ID}.@{applicationType}]]></value></Parameter>
<Parameter name="generatorName" type="string" linked_module="" linked_parameter="" in="True" out="False" description="GeneratorName"><value><![CDATA[]]></value></Parameter>
<Parameter name="applicationName" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ApplicationName"><value><![CDATA[LHCb]]></value></Parameter>
<Parameter name="applicationVersion" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ApplicationVersion"><value><![CDATA[{{p4Ver}}]]></value></Parameter>
<Parameter name="applicationType" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ApplicationType"><value><![CDATA[{{FileType#File type to merge (default DST)}}]]></value></Parameter>
<Parameter name="applicationLog" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ApplicationLogFile"><value><![CDATA[@{applicationName}_@{STEP_ID}.log]]></value></Parameter>
<Parameter name="optionsFile" type="string" linked_module="" linked_parameter="" in="True" out="False" description="OptionsFile"><value><![CDATA[$STDOPTS/PoolCopy.opts]]></value></Parameter>
<Parameter name="optionsLine" type="string" linked_module="" linked_parameter="" in="True" out="False" description="OptionsLines"><value><![CDATA[MessageSvc().Format = '%u % F%18W%S%7W%R%T %0W%M';MessageSvc().timeFormat = '%Y-%m-%d %H:%M:%S UTC';HistogramPersistencySvc().OutputFile = "@{applicationName}_@{STEP_ID}_Hist.root";OutputStream("InputCopyStream").Output = "DATAFILE='PFN:@{outputData}' TYP='POOL_ROOTTREE' OPT='RECREATE'"]]></value></Parameter>
<Parameter name="optionsLinePrev" type="string" linked_module="" linked_parameter="" in="True" out="False" description="PreviousOptionsLines"><value><![CDATA[None]]></value></Parameter>
<Parameter name="numberOfEvents" type="string" linked_module="" linked_parameter="" in="True" out="False" description="NumberOfEvents"><value><![CDATA[-1]]></value></Parameter>
<Parameter name="numberOfEventsInput" type="string" linked_module="" linked_parameter="" in="True" out="False" description="NumberOfEventsInput"><value><![CDATA[]]></value></Parameter>
<Parameter name="numberOfEventsOutput" type="string" linked_module="" linked_parameter="" in="True" out="False" description="NumberOfEventsOutput"><value><![CDATA[]]></value></Parameter>
<Parameter name="listoutput" type="list" linked_module="" linked_parameter="" in="True" out="False" description="StepOutputList"><value><![CDATA[[{'outputDataType': '@{applicationType}', 'outputDataSE': 'Tier1_MC_M-DST', 'outputDataName': '@{STEP_ID}.@{applicationType}'}]]]></value></Parameter>
<Parameter name="extraPackages" type="string" linked_module="" linked_parameter="" in="True" out="False" description="ExtraPackages"><value><![CDATA[]]></value></Parameter>
<Parameter name="firstEventNumber" type="string" linked_module="" linked_parameter="" in="True" out="False" description="FirstEventNumber"><value><![CDATA[int]]></value></Parameter>
<Parameter name="spilloverData" type="string" linked_module="" linked_parameter="" in="True" out="False" description="spilloverData"><value><![CDATA[None]]></value></Parameter>
<Parameter name="pileupData" type="string" linked_module="" linked_parameter="" in="True" out="False" description="pileupData"><value><![CDATA[None]]></value></Parameter>
</StepInstance>
<StepInstance>
<type>Job_Finalization</type>
<name>finalization</name>
<descr_short></descr_short>
<Parameter name="BKEnable" type="bool" linked_module="" linked_parameter="" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
<Parameter name="UploadEnable" type="bool" linked_module="" linked_parameter="" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
<Parameter name="LogEnable" type="bool" linked_module="" linked_parameter="" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
<Parameter name="DataRemovalEnable" type="bool" linked_module="" linked_parameter="" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
<Parameter name="FailoverEnable" type="bool" linked_module="" linked_parameter="" in="True" out="False" description="EnableFlag"><value><![CDATA[True]]></value></Parameter>
</StepInstance>
</Workflow>
